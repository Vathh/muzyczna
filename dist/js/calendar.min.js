"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Calendar=function(){function n(e,t){var a=this;_classCallCheck(this,n),this.now=new Date,this.day=this.now.getDate(),this.month=this.now.getMonth(),this.year=this.now.getFullYear(),this.input=e,this.divCnt=null,this.divTable=null,this.divDateText=null,this.divButtons=null,this.options=Object.assign({},{closeOnSelect:!1,onDateSelect:function(e,t,n){t=t+1<10?"0"+(t+1):t+1;a.input.value="".concat(e<10?"0"+e:e,"-").concat(t,"-").concat(a.year)}},t)}return _createClass(n,[{key:"createButtons",value:function(){var t=this,e=document.createElement("button");e.innerText="<",e.type="button",e.classList.add("input-prev"),e.addEventListener("click",function(e){t.month--,t.month<0&&(t.month=11,t.year--),t.createCalendarTable(),t.createDateText()}),this.divButtons.appendChild(e);e=document.createElement("button");e.classList.add("input-next"),e.innerText=">",e.type="button",e.addEventListener("click",function(e){t.month++,11<t.month&&(t.month=0,t.year++),t.createCalendarTable(),t.createDateText()}),this.divButtons.appendChild(e)}},{key:"createDateText",value:function(){this.divDateText.innerHTML=["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"][this.month]+" "+this.year}},{key:"createCalendarTable",value:function(){this.divTable.innerHTML="";var e=document.createElement("table");e.classList.add("calendar-table");var n=document.createElement("tr");n.classList.add("calendar-table-days-names");["Pon","Wto","Śro","Czw","Pią","Sob","Nie"].forEach(function(e){var t=document.createElement("th");t.innerHTML=e,n.appendChild(t)}),e.appendChild(n);var t=new Date(this.year,this.month+1,0).getDate(),a=new Date(this.year,this.month,1).getDay(),i=t+(a=0===a?7:a)-1;a-1!=0&&(n=document.createElement("tr"),e.appendChild(n));for(var s=0;s<a-1;s++){var d=document.createElement("td");d.innerHTML="",n.appendChild(d)}for(var r=a-1;r<i;r++){r%7==0&&(n=document.createElement("tr"),e.appendChild(n));var c=document.createElement("td");c.innerText=r-a+2,c.dayNr=r-a+2,c.classList.add("day"),this.year===this.now.getFullYear()&&this.month===this.now.getMonth()&&this.day===r-a+2&&c.classList.add("current-day"),n.appendChild(c)}e.appendChild(n),this.divTable.appendChild(e)}},{key:"bindTableDaysEvent",value:function(){var t=this;this.divTable.addEventListener("click",function(e){"td"===e.target.tagName.toLowerCase()&&e.target.classList.contains("day")&&(t.options.closeOnSelect&&t.hide(),t.options.onDateSelect(e.target.dayNr,t.month+1,t.year))})}},{key:"toggleShow",value:function(){this.divCnt.classList.toggle("calendar-show")}},{key:"show",value:function(){this.divCnt.classList.add("calendar-show")}},{key:"hide",value:function(){this.divCnt.classList.remove("calendar-show")}},{key:"init",value:function(){var t=this;this.divCnt=document.createElement("div"),this.divCnt.classList.add("calendar"),this.divButtons=document.createElement("div"),this.divButtons.className="calendar-prev-next",this.createButtons(),this.divDateText=document.createElement("div"),this.divDateText.className="date-name",this.createDateText(),this.divHeader=document.createElement("div"),this.divHeader.classList.add("calendar-header"),this.divHeader.appendChild(this.divButtons),this.divHeader.appendChild(this.divDateText),this.divCnt.appendChild(this.divHeader),this.divTable=document.createElement("div"),this.divTable.className="calendar-table-cnt",this.divCnt.appendChild(this.divTable),this.createCalendarTable(),this.bindTableDaysEvent(),this.calendarWrapper=document.createElement("div"),this.calendarWrapper.classList.add("input-calendar-cnt"),this.input.parentElement.insertBefore(this.calendarWrapper,this.input),this.calendarWrapper.appendChild(this.input),this.calendarWrapper.appendChild(this.divCnt),this.input.classList.add("input-calendar"),this.input.addEventListener("click",function(e){return t.toggleShow()}),this.input.addEventListener("click",function(e){return e.stopImmediatePropagation()}),this.divCnt.addEventListener("click",function(e){return e.stopImmediatePropagation()}),document.addEventListener("click",function(e){return t.hide()})}}]),n}(),input=document.querySelector(".input-date"),cal=new Calendar(input,{closeOnSelect:!0,onDateSelect:function(e,t,n){console.log(e),console.log(t),console.log(n);input.value=(e+1<10?"0"+(e+1):e+1)-1+" "+["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"][t-1]+" "+n}});cal.init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhbGVuZGFyLmpzIl0sIm5hbWVzIjpbIkNhbGVuZGFyIiwiaW5wdXQiLCJvcHRpb25zIiwiX3RoaXMiLCJ0aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwibm93IiwiRGF0ZSIsImRheSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwieWVhciIsImdldEZ1bGxZZWFyIiwiZGl2Q250IiwiZGl2VGFibGUiLCJkaXZEYXRlVGV4dCIsImRpdkJ1dHRvbnMiLCJPYmplY3QiLCJhc3NpZ24iLCJjbG9zZU9uU2VsZWN0Iiwib25EYXRlU2VsZWN0IiwiY29uY2F0IiwibW9udGhUZXh0IiwiX3RoaXMyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYnV0dG9uUHJldiIsInR5cGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImNyZWF0ZUNhbGVuZGFyVGFibGUiLCJjcmVhdGVEYXRlVGV4dCIsImFwcGVuZENoaWxkIiwiaW5uZXJUZXh0IiwiYnV0dG9uTmV4dCIsInRhYiIsInRyIiwiZm9yRWFjaCIsInRoIiwiaW5uZXJIVE1MIiwibW9udGhOYW1lcyIsImRheXNJbk1vbnRoIiwiZ2V0RGF5IiwiZmlyc3RNb250aERheSIsImkiLCJ0ZCIsInRlbXBEYXRlIiwiaiIsIl90aGlzMyIsInRhcmdldCIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsImNvbnRhaW5zIiwiZGF5TnIiLCJ0b2dnbGUiLCJyZW1vdmUiLCJfdGhpczQiLCJjbGFzc05hbWUiLCJjcmVhdGVCdXR0b25zIiwiZGl2SGVhZGVyIiwiYmluZFRhYmxlRGF5c0V2ZW50IiwiY2FsZW5kYXJXcmFwcGVyIiwiaW5zZXJ0QmVmb3JlIiwidG9nZ2xlU2hvdyIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImhpZGUiLCJjYWwiLCJjb25zb2xlIiwiaW5pdCJdLCJtYXBwaW5ncyI6InVaQUFNQSxTLFdBQ0YsU0FBQUEsRUFBWUMsRUFBT0MsR0FBUyxJQUFBQyxFQUFBQyxL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RCxRQUFLdkQsSUFBTFAsR0FDQThELFFBQUt2RCxJQUFTNkMsR0FDZFUsUUFBS3hELElBQU9xQixHQU1abEMsTUFBSytELE9BSkFELEVBNUJGLEVBOEJILEdBQUEsS0FBQXZELEVBQUEsR0FBQUEsRUFBQSxHQUVxQnFCLEVBQXJCLElBc0JvQixDQUFDLFVBQVcsT0FBUSxTQUFVLFdBQVksTUFBTyxXQUFZLFNBQVUsV0FBWSxXQUFZLGNBQWUsV0FBWSxZQXRCM0duQixFQUFuQyxHQUFBLElBQUFFLEtBR0F5RCxJQUFBRSIsImZpbGUiOiJjYWxlbmRhci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDYWxlbmRhciB7XHJcbiAgICBjb25zdHJ1Y3RvcihpbnB1dCwgb3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMubm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICB0aGlzLmRheSA9IHRoaXMubm93LmdldERhdGUoKTtcclxuICAgICAgICB0aGlzLm1vbnRoID0gdGhpcy5ub3cuZ2V0TW9udGgoKTtcclxuICAgICAgICB0aGlzLnllYXIgPSB0aGlzLm5vdy5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcclxuICAgICAgICB0aGlzLmRpdkNudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5kaXZUYWJsZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5kaXZEYXRlVGV4dCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5kaXZCdXR0b25zID0gbnVsbDtcclxuXHJcbiAgICAgICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGNsb3NlT25TZWxlY3QgOiBmYWxzZSxcclxuICAgICAgICAgICAgb25EYXRlU2VsZWN0IDogKGRheSwgbW9udGgsIHllYXIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRoVGV4dCA9ICgobW9udGggKyAxKSA8IDEwKSA/IFwiMFwiICsgKG1vbnRoICsgMSkgOiBtb250aCArIDE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXlUZXh0ID0gIChkYXkgPCAxMCkgPyBcIjBcIiArIGRheSA6IGRheTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQudmFsdWUgPSBgJHtkYXlUZXh0fS0ke21vbnRoVGV4dH0tJHt0aGlzLnllYXJ9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9tZXRvZGEgdHdvcnrEhWNhIHByenljaXNraSBwcmV2LW5leHRcclxuICAgIGNyZWF0ZUJ1dHRvbnMoKSB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uUHJldiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgYnV0dG9uUHJldi5pbm5lclRleHQgPSBcIjxcIjtcclxuICAgICAgICBidXR0b25QcmV2LnR5cGUgPSBcImJ1dHRvblwiO1xyXG4gICAgICAgIGJ1dHRvblByZXYuY2xhc3NMaXN0LmFkZChcImlucHV0LXByZXZcIik7XHJcbiAgICAgICAgYnV0dG9uUHJldi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubW9udGgtLTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubW9udGggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vbnRoID0gMTE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnllYXItLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUNhbGVuZGFyVGFibGUoKTtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVEYXRlVGV4dCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZGl2QnV0dG9ucy5hcHBlbmRDaGlsZChidXR0b25QcmV2KTtcclxuXHJcbiAgICAgICAgY29uc3QgYnV0dG9uTmV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgYnV0dG9uTmV4dC5jbGFzc0xpc3QuYWRkKFwiaW5wdXQtbmV4dFwiKTtcclxuICAgICAgICBidXR0b25OZXh0LmlubmVyVGV4dCA9IFwiPlwiO1xyXG4gICAgICAgIGJ1dHRvbk5leHQudHlwZSA9IFwiYnV0dG9uXCI7XHJcbiAgICAgICAgYnV0dG9uTmV4dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubW9udGgrKztcclxuICAgICAgICAgICAgaWYgKHRoaXMubW9udGggPiAxMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb250aCA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnllYXIrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUNhbGVuZGFyVGFibGUoKTtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVEYXRlVGV4dCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZGl2QnV0dG9ucy5hcHBlbmRDaGlsZChidXR0b25OZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICAvL21ldG9kYSB3eXBpc3VqxIVjYSBuYXp3xJkgbWllc2nEhWNhIGkgcm9rdVxyXG4gICAgY3JlYXRlRGF0ZVRleHQoKSB7XHJcbiAgICAgICAgY29uc3QgbW9udGhOYW1lcyA9IFtcInN0eWN6ZcWEXCIsIFwibHV0eVwiLCBcIm1hcnplY1wiLCBcImt3aWVjaWXFhFwiLCBcIm1halwiLCBcImN6ZXJ3aWVjXCIsIFwibGlwaWVjXCIsIFwic2llcnBpZcWEXCIsIFwid3J6ZXNpZcWEXCIsIFwicGHFumR6aWVybmlrXCIsIFwibGlzdG9wYWRcIiwgXCJncnVkemllxYRcIl07XHJcbiAgICAgICAgdGhpcy5kaXZEYXRlVGV4dC5pbm5lckhUTUwgPSBtb250aE5hbWVzW3RoaXMubW9udGhdICsgXCIgXCIgKyB0aGlzLnllYXI7XHJcbiAgICB9XHJcblxyXG4gICAgLy9tZXRvZGEgdHdvcnrEhWNhIHRhYmVsZSB6IGthbGVuZGFyemVtXHJcbiAgICBjcmVhdGVDYWxlbmRhclRhYmxlKCkge1xyXG4gICAgICAgIHRoaXMuZGl2VGFibGUuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgICAgICAgLy90d29yenlteSBuYXp3eSBkbmlcclxuICAgICAgICBjb25zdCB0YWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGFibGVcIik7XHJcbiAgICAgICAgdGFiLmNsYXNzTGlzdC5hZGQoXCJjYWxlbmRhci10YWJsZVwiKTtcclxuXHJcbiAgICAgICAgLy90d29yenlteSBuYWfFgsOzd2tpIGRuaVxyXG4gICAgICAgIGxldCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICAgICAgICB0ci5jbGFzc0xpc3QuYWRkKFwiY2FsZW5kYXItdGFibGUtZGF5cy1uYW1lc1wiKTtcclxuICAgICAgICBjb25zdCBkYXlzID0gW1wiUG9uXCIsIFwiV3RvXCIsIFwixZpyb1wiLCBcIkN6d1wiLCBcIlBpxIVcIiwgXCJTb2JcIiwgXCJOaWVcIl07XHJcbiAgICAgICAgZGF5cy5mb3JFYWNoKGRheSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xyXG4gICAgICAgICAgICB0aC5pbm5lckhUTUwgPSBkYXk7XHJcbiAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0YWIuYXBwZW5kQ2hpbGQodHIpO1xyXG5cclxuICAgICAgICAvL3BvYmllcmFteSB3c3p5c3RraWUgZG5pIGRhbmVnbyBtaWVzacSFY2FcclxuICAgICAgICBjb25zdCBkYXlzSW5Nb250aCA9IG5ldyBEYXRlKHRoaXMueWVhciwgdGhpcy5tb250aCsxLCAwKS5nZXREYXRlKCk7XHJcblxyXG4gICAgICAgIC8vcG9iaWVyYW15IHBpZXJ3c3p5IGR6aWXFhCBtaWVzacSFY2FcclxuICAgICAgICBjb25zdCB0ZW1wRGF0ZSA9IG5ldyBEYXRlKHRoaXMueWVhciwgdGhpcy5tb250aCwgMSk7XHJcbiAgICAgICAgbGV0IGZpcnN0TW9udGhEYXkgPSB0ZW1wRGF0ZS5nZXREYXkoKTtcclxuICAgICAgICBpZiAoZmlyc3RNb250aERheSA9PT0gMCkge1xyXG4gICAgICAgICAgICBmaXJzdE1vbnRoRGF5ID0gNztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vd3N6eXN0a2llIGtvbcOzcmtpIHcgdGFiZWxpXHJcbiAgICAgICAgY29uc3QgaiA9IGRheXNJbk1vbnRoICsgZmlyc3RNb250aERheSAtIDE7XHJcblxyXG4gICAgICAgIGlmIChmaXJzdE1vbnRoRGF5IC0gMSAhPT0gMCkge1xyXG4gICAgICAgICAgICB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICAgICAgICAgICAgdGFiLmFwcGVuZENoaWxkKHRyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vdHdvcnp5bXkgcHVzdGUga29tw7Nya2kgcHJ6ZWQgZG5pYW1pIG1pZXNpxIVjYVxyXG4gICAgICAgIGZvciAobGV0IGk9MDsgaSA8IGZpcnN0TW9udGhEYXkgLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgICAgICAgICAgIHRkLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vdHdvcnp5bXkga29tw7Nya2kgZG5pXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGZpcnN0TW9udGhEYXktMTsgaTxqOyBpKyspIHtcclxuICAgICAgICAgICAgaWYoaSAlIDcgPT09IDApe1xyXG4gICAgICAgICAgICAgICAgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XHJcbiAgICAgICAgICAgICAgICB0YWIuYXBwZW5kQ2hpbGQodHIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICAgICAgICAgICAgdGQuaW5uZXJUZXh0ID0gaSAtIGZpcnN0TW9udGhEYXkgKyAyO1xyXG4gICAgICAgICAgICB0ZC5kYXlOciA9IGkgLSBmaXJzdE1vbnRoRGF5ICsgMjtcclxuICAgICAgICAgICAgdGQuY2xhc3NMaXN0LmFkZChcImRheVwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnllYXIgPT09IHRoaXMubm93LmdldEZ1bGxZZWFyKCkgJiYgdGhpcy5tb250aCA9PT0gdGhpcy5ub3cuZ2V0TW9udGgoKSAmJiB0aGlzLmRheSA9PT0gaSAtIGZpcnN0TW9udGhEYXkgKyAyKSB7XHJcbiAgICAgICAgICAgICAgICB0ZC5jbGFzc0xpc3QuYWRkKFwiY3VycmVudC1kYXlcIilcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGFiLmFwcGVuZENoaWxkKHRyKTtcclxuXHJcbiAgICAgICAgdGhpcy5kaXZUYWJsZS5hcHBlbmRDaGlsZCh0YWIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vcG9kcGluYW15IGtsaWsgcG9kIGRuaSB3IHRhYmVsaSBrYWxlbmRhcnphXHJcbiAgICBiaW5kVGFibGVEYXlzRXZlbnQoKSB7XHJcbiAgICAgICAgdGhpcy5kaXZUYWJsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwidGRcIiAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJkYXlcIikpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2xvc2VPblNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uRGF0ZVNlbGVjdChlLnRhcmdldC5kYXlOciwgdGhpcy5tb250aCArIDEsIHRoaXMueWVhcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvL21ldG9kYSB1a3J5d2EvcG9rYXp1amUga2FsZW5kYXJ6XHJcbiAgICB0b2dnbGVTaG93KCkge1xyXG4gICAgICAgIHRoaXMuZGl2Q250LmNsYXNzTGlzdC50b2dnbGUoXCJjYWxlbmRhci1zaG93XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vbWV0b2RhIHBva2F6dWplIGthbGVuZGFyelxyXG4gICAgc2hvdygpIHtcclxuICAgICAgICB0aGlzLmRpdkNudC5jbGFzc0xpc3QuYWRkKFwiY2FsZW5kYXItc2hvd1wiKTtcclxuICAgIH1cclxuXHJcbiAgICAvL21ldG9kYSB1a3J5d2Ega2FsZW5kYXJ6XHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIHRoaXMuZGl2Q250LmNsYXNzTGlzdC5yZW1vdmUoXCJjYWxlbmRhci1zaG93XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vbWV0b2RhIGluaWNqdWrEhWNhIG9iaWVrdFxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICAvL3R3b3J6eW15IGRpdiB6IGNhxYLEhSB6YXdhcnRvxZtjacSFXHJcbiAgICAgICAgdGhpcy5kaXZDbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuZGl2Q250LmNsYXNzTGlzdC5hZGQoXCJjYWxlbmRhclwiKTtcclxuXHJcbiAgICAgICAgLy90d29yenlteSBkaXYgeiBndXppa2FtaVxyXG4gICAgICAgIHRoaXMuZGl2QnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5kaXZCdXR0b25zLmNsYXNzTmFtZSA9IFwiY2FsZW5kYXItcHJldi1uZXh0XCI7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVCdXR0b25zKCk7XHJcblxyXG4gICAgICAgIC8vdHdvcnp5bXkgZGl2IHogbmF6d8SFIG1pZXNpxIVjYVxyXG4gICAgICAgIHRoaXMuZGl2RGF0ZVRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuZGl2RGF0ZVRleHQuY2xhc3NOYW1lID0gXCJkYXRlLW5hbWVcIjtcclxuICAgICAgICB0aGlzLmNyZWF0ZURhdGVUZXh0KCk7XHJcblxyXG4gICAgICAgIC8vdHdvcnp5bXkgbmFnxYLDs3dlayBrYWxlbmRhcnphXHJcbiAgICAgICAgdGhpcy5kaXZIZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuZGl2SGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJjYWxlbmRhci1oZWFkZXJcIik7XHJcblxyXG4gICAgICAgIHRoaXMuZGl2SGVhZGVyLmFwcGVuZENoaWxkKHRoaXMuZGl2QnV0dG9ucyk7XHJcbiAgICAgICAgdGhpcy5kaXZIZWFkZXIuYXBwZW5kQ2hpbGQodGhpcy5kaXZEYXRlVGV4dCk7XHJcbiAgICAgICAgdGhpcy5kaXZDbnQuYXBwZW5kQ2hpbGQodGhpcy5kaXZIZWFkZXIpO1xyXG5cclxuICAgICAgICAvL3R3b3J6eW15IGRpdiB6IHRhYmVsxIUga2FsZW5kYXJ6YVxyXG4gICAgICAgIHRoaXMuZGl2VGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuZGl2VGFibGUuY2xhc3NOYW1lID0gXCJjYWxlbmRhci10YWJsZS1jbnRcIjtcclxuICAgICAgICB0aGlzLmRpdkNudC5hcHBlbmRDaGlsZCh0aGlzLmRpdlRhYmxlKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZUNhbGVuZGFyVGFibGUoKTtcclxuICAgICAgICB0aGlzLmJpbmRUYWJsZURheXNFdmVudCgpO1xyXG5cclxuICAgICAgICAvL3R3b3J6eW15IHdyYXBwZXIgZGxhIGlucHV0XHJcbiAgICAgICAgdGhpcy5jYWxlbmRhcldyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuY2FsZW5kYXJXcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJpbnB1dC1jYWxlbmRhci1jbnRcIik7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLmNhbGVuZGFyV3JhcHBlciwgdGhpcy5pbnB1dCk7XHJcbiAgICAgICAgdGhpcy5jYWxlbmRhcldyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5pbnB1dCk7XHJcbiAgICAgICAgdGhpcy5jYWxlbmRhcldyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy5kaXZDbnQpO1xyXG5cclxuICAgICAgICB0aGlzLmlucHV0LmNsYXNzTGlzdC5hZGQoXCJpbnB1dC1jYWxlbmRhclwiKTtcclxuICAgICAgICB0aGlzLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHRoaXMudG9nZ2xlU2hvdygpKTtcclxuICAgICAgICB0aGlzLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkpO1xyXG4gICAgICAgIHRoaXMuZGl2Q250LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHRoaXMuaGlkZSgpKTtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmlucHV0LWRhdGVcIik7XHJcbmNvbnN0IGNhbCA9IG5ldyBDYWxlbmRhcihpbnB1dCwge1xyXG4gICAgY2xvc2VPblNlbGVjdCA6IHRydWUsXHJcbiAgICBvbkRhdGVTZWxlY3QoZGF5LCBtb250aCwgeWVhcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRheSk7XHJcbiAgICAgICAgY29uc29sZS5sb2cobW9udGgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHllYXIpO1xyXG5cclxuICAgICAgICBjb25zdCBkYXlUZXh0ID0gKChkYXkgKyAxKSA8IDEwKSA/IFwiMFwiICsgKGRheSArIDEpIDogZGF5ICsgMTtcclxuICAgICAgICBjb25zdCBtb250aHNOYW1lcyA9IFtcInN0eWN6ZcWEXCIsIFwibHV0eVwiLCBcIm1hcnplY1wiLCBcImt3aWVjaWXFhFwiLCBcIm1halwiLCBcImN6ZXJ3aWVjXCIsIFwibGlwaWVjXCIsIFwic2llcnBpZcWEXCIsIFwid3J6ZXNpZcWEXCIsIFwicGHFumR6aWVybmlrXCIsIFwibGlzdG9wYWRcIiwgXCJncnVkemllxYRcIl07XHJcblxyXG4gICAgICAgIGlucHV0LnZhbHVlID0gZGF5VGV4dCAtIDEgKyBcIiBcIiArIG1vbnRoc05hbWVzW21vbnRoIC0gMV0gKyBcIiBcIiArIHllYXI7XHJcbiAgICB9XHJcbn0pO1xyXG5jYWwuaW5pdCgpOyJdfQ==
